@if ((loading$ | async) ?? false) {
  <div class="flex h-full w-full items-center justify-center pb-14">
    <mat-spinner></mat-spinner>
  </div>
} @else {
  @if (trips$ | async; as trips) {
    @if (trips.length > 0) {
      <div class="flex flex-col items-center overflow-x-hidden px-4 pb-24 pt-6">
        @for (trip of trips; track trip.docId) {
          <div class="boundary relative flex w-[125%] justify-center">
            <div
              class="absolute z-0 flex h-calc w-9/12 overflow-hidden rounded-xl">
              <div class="flex w-1/2 items-center justify-start bg-blue-800">
                <mat-icon class="mx-5 scale-150 text-white">edit</mat-icon>
              </div>
              <div class="flex w-1/2 items-center justify-end bg-red-800">
                <mat-icon class="mx-5 scale-150 text-white">delete</mat-icon>
              </div>
            </div>
            <div
              swipe
              (left)="onSwipeLeft(trip.docId)"
              (right)="onSwipeRight(trip.docId)"
              (onClick)="handleTripClick(trip.docId)"
              class="z-10 w-9/12 cursor-pointer"
              cdkDrag
              cdkDragLockAxis="x"
              (cdkDragReleased)="resetPosition($event)"
              cdkDragBoundary=".boundary">
              @if (baseCurrency$ | async; as baseCurrency) {
                @if (trip.startDate && trip.endDate && trip.duration) {
                  <app-trip-card
                    [tripTitle]="trip.title"
                    [startDate]="trip.startDate"
                    [endDate]="trip.endDate"
                    [duration]="trip.duration"
                    [totalCost]="trip.totalCost ?? 0"
                    [currency]="baseCurrency ?? 'ZAR'" />
                }
              }
            </div>
          </div>
        }
        <a
          type="button"
          class="btn fixed bottom-10 right-6 z-20 h-fit w-fit rounded-full bg-neutral-800 p-4 shadow-md shadow-white/20"
          routerLink="/new-trip">
          <mat-icon class="text-green-400">add</mat-icon>
        </a>
      </div>
      <dialog #confirmModal class="modal">
        <div class="modal-box">
          <h3 class="text-lg font-bold">Hold on!</h3>
          <p class="py-4">Are you sure you would like to delete this trip?</p>
          <div class="modal-action">
            <div class="flex gap-2">
              <button class="btn btn-warning" (click)="closeModal()">
                Cancel
              </button>
              <button class="btn btn-error" (click)="deleteTrip()">
                Delete
              </button>
            </div>
          </div>
        </div>
      </dialog>
    } @else {
      <div class="flex flex-col items-center overflow-x-hidden p-4">
        No trips
      </div>
      <a
        type="button"
        class="btn fixed bottom-10 right-6 z-20 h-fit w-fit rounded-full bg-neutral-800 p-4 shadow-md shadow-white/20"
        routerLink="/new-trip">
        <mat-icon class="text-green-400">add</mat-icon>
      </a>
    }
  }
}
